@if (landingPageData?.id) {
  <div class="client-section">
    <div class="section-header">
      <h4>{{ 'landing.hallClients' | translate }}</h4>
      <div class="header-actions">
        @if (!isEditMode && hallClients.length > 0) {
          <button
            type="button"
            class="edit-button"
            (click)="toggleEditMode()">
            <i class="pi pi-pencil"></i>
            {{ 'common.edit' | translate }}
          </button>
        }
        @if (!isEditMode && hallClients.length === 0) {
          <button
            type="button"
            class="add-button"
            (click)="addClient()">
            <i class="pi pi-plus"></i>
            {{ 'landing.addClient' | translate }}
          </button>
        }
        @if (isEditMode) {
          <button
            type="button"
            class="add-button"
            (click)="addClient()"
            [disabled]="hallClients.length >= maxClients || activeClient">
            <i class="pi pi-plus"></i>
            {{ 'landing.addClient' | translate }}
          </button>
        }
      </div>
    </div>
    @if (hallClients.length < 1 && !isEditMode) {
      <div>
        <app-empty-data
          icon="pi pi-list"
          [title]="'landing.noClients'"
          [description]="'landing.addFirstClient'"
        [disabled]="hallClients.length >= maxClients"></app-empty-data>
      </div>
    }
    <div class="client-list">
      @for (client of hallClients.controls; track client; let i = $index) {
        <div
          class="client-item">
          <!-- View Mode -->
          @if (!isEditMode || client !== activeClient) {
            <div
              class="client-content">
              <div class="client-image">
                <img [src]="client.get('image')?.value" alt="Client image" />
              </div>
              <div class="client-info">
                <h5>{{ client.get('name')?.value }}</h5>
                <p>{{ client.get('site_url')?.value }}</p>
              </div>
              @if (isEditMode) {
                <div class="client-actions">
                  <button
                    type="button"
                    class="edit-button"
                    (click)="editClient($any(client))">
                    <i class="pi pi-pencil"></i>
                  </button>
                  <button type="button" class="delete-button" (click)="removeClient(i)">
                    <i class="pi pi-trash"></i>
                  </button>
                </div>
              }
            </div>
          }
          <!-- Edit Form - Inline -->
          @if (isEditMode && client === activeClient) {
            <form
              [formGroup]="$any(client)"
              class="client-form"
              (ngSubmit)="saveClient()">
              <div class="form-grid">
                <div class="name-field">
                  <div class="field">
                    <app-input
                      [control]="client.get('name')!"
                      [controlName]="'name'"
                      [label]="'landing.clientName' | translate"
                      [placeholder]="'landing.clientNamePlaceholder' | translate">
                    </app-input>
                  </div>
                  <div class="field">
                    <app-input
                      [control]="client.get('site_url')!"
                      [controlName]="'site_url'"
                      [label]="'landing.clientWebsite' | translate"
                      [placeholder]="'landing.websitePlaceholder' | translate">
                    </app-input>
                  </div>
                </div>
                <div class="">
                  <div>
                    <label>{{ 'landing.selectOrder' | translate }}</label>
                    <p-dropdown
                      id="value"
                      [formControl]="$any(client.get('order'))"
                      [options]="getOrderOptions(hallClients.length)"
                      [optionLabel]="'label'"
                      [optionValue]="'value'"
                      [placeholder]="'common.select' | translate" />
                  </div>
                </div>
                <div class="image-upload">
                  <app-file-upload
                    [imgUrl]="client.get('image')?.value"
                    accept="image/*"
                    [control]="$any(client.get('image'))"
                    [title]="'landing.clientImage' | translate"
                    [hint]="'landing.uploadClientImage' | translate">
                  </app-file-upload>
                </div>
                <div class="form-actions">
                  <button
                    type="button"
                    pButton
                    icon="pi pi-times"
                    label="{{ 'common.cancel' | translate }}"
                  (click)="cancel($any(client))"></button>
                  <button
                    type="submit"
                    pButton
                    [disabled]="client.invalid"
                    icon="pi pi-check"
                  label="{{ 'common.save' | translate }}"></button>
                </div>
              </div>
            </form>
          }
        </div>
      }
    </div>
    @if (isEditMode && !activeClient) {
      <div class="form-actions">
        <button
          type="button"
          pButton
          class="p-button-secondary"
          [label]="'common.done' | translate"
        (click)="toggleEditMode()"></button>
      </div>
    }
  </div>
}
