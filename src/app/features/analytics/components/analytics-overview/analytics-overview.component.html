<div class="analytics-container">
  <div class="analytics-hero" [@fadeInUp]>
    <div class="hero-background">
      <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
      </div>
    </div>

    <div class="hero-content">
      <div class="title-section" [@slideInFromLeft]>
        <h1 class="page-title">
          <i class="pi pi-chart-bar title-icon animate-glow"></i>
          {{ 'analytics.title' | translate }}
        </h1>
        <p class="page-subtitle">
          {{ 'analytics.subtitle' | translate }}
        </p>
        <div class="title-decoration"></div>
      </div>

      <div class="hero-stats" *ngIf="!loading && !error" [@slideInFromRight]>
        <div class="stats-info">
          <div class="stat-number animate-heartbeat">
            {{ stats.totalDashboards }}
          </div>
          <div class="stat-label">
            {{ 'analytics.dashboards' | translate }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="loading" class="loading-container" [@fadeInUp]>
    <div class="loading-content">
      <div class="loading-spinner animate-pulse">
        <i class="pi pi-spin pi-spinner"></i>
        <div class="loading-rings">
          <div class="ring ring-1"></div>
          <div class="ring ring-2"></div>
          <div class="ring ring-3"></div>
        </div>
      </div>
      <h3>{{ 'analytics.loading.title' | translate }}</h3>
      <p>{{ 'analytics.loading.message' | translate }}</p>
      <div class="loading-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>

  <div *ngIf="error && !loading" class="error-container" [@fadeInUp]>
    <div class="error-content">
      <i class="pi pi-exclamation-triangle error-icon animate-wave"></i>
      <h3>{{ 'analytics.error.title' | translate }}</h3>
      <p>{{ 'analytics.error.message' | translate }}</p>
      <p-button
        icon="pi pi-refresh"
        [label]="'common.retry' | translate"
        (click)="onRetry()"
        class="error-retry-btn">
      </p-button>
    </div>
  </div>

  <div *ngIf="!loading && !error" class="analytics-content" [@fadeInUp]>

    <div class="results-section" [@fadeInUp]>
      <div *ngIf="filteredItems.length === 0" class="empty-state" [@rotateIn]>
        <div class="empty-icon-container">
          <i class="pi pi-chart-line empty-icon animate-float"></i>
          <div class="empty-particles">
            <div class="particle particle-1"></div>
            <div class="particle particle-2"></div>
            <div class="particle particle-3"></div>
          </div>
        </div>
        <h3>{{ 'analytics.empty.noDashboards.title' | translate }}</h3>
        <p>{{ 'analytics.empty.noDashboards.message' | translate }}</p>
      </div>

      <div
        *ngIf="filteredItems.length > 0"
        class="dashboards-grid"
        [@staggerCards]>
        <div
          *ngFor="
            let dashboard of filteredItems;
            trackBy: trackByItemId;
            let i = index
          "
          class="dashboard-card"
          [@cardHover]="hoveredItem === dashboard.id ? 'hover' : 'default'"
          (click)="onItemClick(dashboard)"
          (mouseenter)="hoveredItem = dashboard.id"
          (mouseleave)="hoveredItem = null"
          [style.animation-delay]="i * 100 + 'ms'">
          <div class="card-background">
            <div class="gradient-overlay"></div>
            <div class="data-flow" *ngIf="hoveredItem === dashboard.id">
              <div class="flow-line"></div>
              <div class="flow-line"></div>
              <div class="flow-line"></div>
            </div>
          </div>

          <div class="card-header">
            <div class="dashboard-icon">
              <i
                class="pi pi-chart-line"
                [class.animate-wave]="hoveredItem === dashboard.id"></i>
              <div
                class="icon-pulse"
                *ngIf="hoveredItem === dashboard.id"></div>
            </div>
            <div class="card-actions">
              <span class="dashboard-badge">
                Dashboard
              </span>
            </div>
          </div>

          <div class="card-content">
            <h3 class="dashboard-title">{{ dashboard.name }}</h3>
          </div>

          <div class="card-footer">
            <div class="dashboard-meta">
              <span class="meta-item" *ngIf="dashboard.updated_at">
                <i class="pi pi-calendar"></i>
                <span>{{ formatDate(dashboard.updated_at) }}</span>
              </span>
              <span class="meta-item">
                <i class="pi pi-hashtag"></i>
                <span>ID: {{ dashboard.id }}</span>
              </span>
            </div>
            <div
              class="view-button"
              [class.visible]="hoveredItem === dashboard.id">
              <span>{{ 'analytics.viewDashboard' | translate }}</span>
              <i class="pi pi-arrow-right"></i>
            </div>
          </div>

          <div class="card-overlay"></div>

          <div class="card-shine" *ngIf="hoveredItem === dashboard.id"></div>
        </div>
      </div>
    </div>
  </div>
</div>
