<div class="calendar-wrapper" [style.visibility]="'hidden'">
  <!-- Hidden elements for navigating to the next and previous months -->
  <span
    #next
    [(viewDate)]="viewDate"
    mwlCalendarPreviousView
    view="month"></span>
  <span #prev [(viewDate)]="viewDate" mwlCalendarNextView view="month"></span>
</div>
<div class="calendar-wrapper" [dir]="'rtl'" [formGroup]="form">
  <div class="calendar-header">
    <div class="calendar-header__date">
      <div class="calendar-header__action">
        <svg
          (click)="prevMonth()"
          viewBox="0 0 20 20"
          width="20"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M1.875 10C1.875 11.607 2.35152 13.1779 3.24431 14.514C4.1371 15.8502 5.40605 16.8916 6.8907 17.5065C8.37535 18.1215 10.009 18.2824 11.5851 17.9689C13.1612 17.6554 14.6089 16.8815 15.7452 15.7452C16.8815 14.6089 17.6554 13.1612 17.9689 11.5851C18.2824 10.009 18.1215 8.37534 17.5065 6.89069C16.8916 5.40604 15.8502 4.13709 14.514 3.24431C13.1779 2.35152 11.607 1.875 10 1.875C7.84581 1.87727 5.78051 2.73403 4.25727 4.25727C2.73403 5.78051 1.87727 7.84581 1.875 10ZM9.19219 6.43281L12.3172 9.55781C12.3753 9.61585 12.4214 9.68478 12.4528 9.76066C12.4843 9.83653 12.5005 9.91786 12.5005 10C12.5005 10.0821 12.4843 10.1635 12.4528 10.2393C12.4214 10.3152 12.3753 10.3841 12.3172 10.4422L9.19219 13.5672C9.07491 13.6845 8.91585 13.7503 8.75 13.7503C8.58415 13.7503 8.42509 13.6845 8.30781 13.5672C8.19054 13.4499 8.12465 13.2908 8.12465 13.125C8.12465 12.9591 8.19054 12.8001 8.30781 12.6828L10.9914 10L8.30781 7.31718C8.24974 7.25911 8.20368 7.19018 8.17225 7.11431C8.14083 7.03844 8.12465 6.95712 8.12465 6.875C8.12465 6.79287 8.14083 6.71156 8.17225 6.63569C8.20368 6.55982 8.24974 6.49088 8.30781 6.43281C8.36588 6.37474 8.43482 6.32868 8.51069 6.29725C8.58656 6.26582 8.66788 6.24965 8.75 6.24965C8.83212 6.24965 8.91344 6.26582 8.98931 6.29725C9.06518 6.32868 9.13412 6.37474 9.19219 6.43281Z"
            fill="#111111" />
        </svg>
        <div class="hijri-day-color">
          {{ form.controls['date'].value | hijriDate: currentLanguage }}
        </div>
        <svg
          (click)="nextMonth()"
          viewBox="0 0 20 20"
          width="20"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M18.125 10C18.125 11.607 17.6485 13.1779 16.7557 14.514C15.8629 15.8502 14.594 16.8916 13.1093 17.5065C11.6247 18.1215 9.99099 18.2824 8.41489 17.9689C6.83879 17.6554 5.39106 16.8815 4.25476 15.7452C3.11846 14.6089 2.34463 13.1612 2.03112 11.5851C1.71762 10.009 1.87852 8.37534 2.49348 6.89069C3.10844 5.40604 4.14984 4.13709 5.48599 3.24431C6.82214 2.35152 8.39303 1.875 10 1.875C12.1542 1.87727 14.2195 2.73403 15.7427 4.25727C17.266 5.78051 18.1227 7.84581 18.125 10ZM10.8078 6.43281L7.68281 9.55781C7.6247 9.61585 7.5786 9.68478 7.54715 9.76066C7.5157 9.83653 7.49951 9.91786 7.49951 10C7.49951 10.0821 7.5157 10.1635 7.54715 10.2393C7.5786 10.3152 7.6247 10.3841 7.68281 10.4422L10.8078 13.5672C10.9251 13.6845 11.0841 13.7503 11.25 13.7503C11.4159 13.7503 11.5749 13.6845 11.6922 13.5672C11.8095 13.4499 11.8753 13.2908 11.8753 13.125C11.8753 12.9591 11.8095 12.8001 11.6922 12.6828L9.00859 10L11.6922 7.31718C11.7503 7.25911 11.7963 7.19018 11.8277 7.11431C11.8592 7.03844 11.8753 6.95712 11.8753 6.875C11.8753 6.79287 11.8592 6.71156 11.8277 6.63569C11.7963 6.55982 11.7503 6.49088 11.6922 6.43281C11.6341 6.37474 11.5652 6.32868 11.4893 6.29725C11.4134 6.26582 11.3321 6.24965 11.25 6.24965C11.1679 6.24965 11.0866 6.26582 11.0107 6.29725C10.9348 6.32868 10.8659 6.37474 10.8078 6.43281Z"
            fill="#111111" />
        </svg>
      </div>
      <div class="calendar-header__action">
        <svg
          (click)="prevMonth()"
          viewBox="0 0 20 20"
          width="20"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M1.875 10C1.875 11.607 2.35152 13.1779 3.24431 14.514C4.1371 15.8502 5.40605 16.8916 6.8907 17.5065C8.37535 18.1215 10.009 18.2824 11.5851 17.9689C13.1612 17.6554 14.6089 16.8815 15.7452 15.7452C16.8815 14.6089 17.6554 13.1612 17.9689 11.5851C18.2824 10.009 18.1215 8.37534 17.5065 6.89069C16.8916 5.40604 15.8502 4.13709 14.514 3.24431C13.1779 2.35152 11.607 1.875 10 1.875C7.84581 1.87727 5.78051 2.73403 4.25727 4.25727C2.73403 5.78051 1.87727 7.84581 1.875 10ZM9.19219 6.43281L12.3172 9.55781C12.3753 9.61585 12.4214 9.68478 12.4528 9.76066C12.4843 9.83653 12.5005 9.91786 12.5005 10C12.5005 10.0821 12.4843 10.1635 12.4528 10.2393C12.4214 10.3152 12.3753 10.3841 12.3172 10.4422L9.19219 13.5672C9.07491 13.6845 8.91585 13.7503 8.75 13.7503C8.58415 13.7503 8.42509 13.6845 8.30781 13.5672C8.19054 13.4499 8.12465 13.2908 8.12465 13.125C8.12465 12.9591 8.19054 12.8001 8.30781 12.6828L10.9914 10L8.30781 7.31718C8.24974 7.25911 8.20368 7.19018 8.17225 7.11431C8.14083 7.03844 8.12465 6.95712 8.12465 6.875C8.12465 6.79287 8.14083 6.71156 8.17225 6.63569C8.20368 6.55982 8.24974 6.49088 8.30781 6.43281C8.36588 6.37474 8.43482 6.32868 8.51069 6.29725C8.58656 6.26582 8.66788 6.24965 8.75 6.24965C8.83212 6.24965 8.91344 6.26582 8.98931 6.29725C9.06518 6.32868 9.13412 6.37474 9.19219 6.43281Z"
            fill="#111111" />
        </svg>
        <div>
          {{ form.controls['date'].value | gregorianDate: currentLanguage }}
        </div>
        <svg
          (click)="nextMonth()"
          viewBox="0 0 20 20"
          width="20"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M18.125 10C18.125 11.607 17.6485 13.1779 16.7557 14.514C15.8629 15.8502 14.594 16.8916 13.1093 17.5065C11.6247 18.1215 9.99099 18.2824 8.41489 17.9689C6.83879 17.6554 5.39106 16.8815 4.25476 15.7452C3.11846 14.6089 2.34463 13.1612 2.03112 11.5851C1.71762 10.009 1.87852 8.37534 2.49348 6.89069C3.10844 5.40604 4.14984 4.13709 5.48599 3.24431C6.82214 2.35152 8.39303 1.875 10 1.875C12.1542 1.87727 14.2195 2.73403 15.7427 4.25727C17.266 5.78051 18.1227 7.84581 18.125 10ZM10.8078 6.43281L7.68281 9.55781C7.6247 9.61585 7.5786 9.68478 7.54715 9.76066C7.5157 9.83653 7.49951 9.91786 7.49951 10C7.49951 10.0821 7.5157 10.1635 7.54715 10.2393C7.5786 10.3152 7.6247 10.3841 7.68281 10.4422L10.8078 13.5672C10.9251 13.6845 11.0841 13.7503 11.25 13.7503C11.4159 13.7503 11.5749 13.6845 11.6922 13.5672C11.8095 13.4499 11.8753 13.2908 11.8753 13.125C11.8753 12.9591 11.8095 12.8001 11.6922 12.6828L9.00859 10L11.6922 7.31718C11.7503 7.25911 11.7963 7.19018 11.8277 7.11431C11.8592 7.03844 11.8753 6.95712 11.8753 6.875C11.8753 6.79287 11.8592 6.71156 11.8277 6.63569C11.7963 6.55982 11.7503 6.49088 11.6922 6.43281C11.6341 6.37474 11.5652 6.32868 11.4893 6.29725C11.4134 6.26582 11.3321 6.24965 11.25 6.24965C11.1679 6.24965 11.0866 6.26582 11.0107 6.29725C10.9348 6.32868 10.8659 6.37474 10.8078 6.43281Z"
            fill="#111111" />
        </svg>
      </div>
    </div>
  </div>
  <mwl-calendar-month-view
    class="mb-3"
    [events]="events"
    [cellTemplate]="customCellTemplate"
    [excludeDays]="excludeDays"
    [refresh]="refresh"
    [viewDate]="viewDate"
    [weekStartsOn]="weekStartsOn">
    <ng-template #customCellTemplate let-day="day">
      <div
        [ngClass]="{
          'weekend-bg': isWeekend(day.date),
          'today': isToday(day.date),
        }"
        class="calendar-day">
        <div class="cal-day-dates">
          <span class="hijri-day-color">
            {{ getHijriDayForCalCells(day.date)
            }}<small class="date-type">{{
              'fields.calendar.hijriShort' | translate
            }}</small>
          </span>
          <span
            [ngClass]="{
              'color1': $any(day.date | date: 'M') % 2 === 0,
              'color2': $any(day.date | date: 'M') % 2 !== 0,
            }">
            {{ day.date | date: 'd' }}

            <small class="date-type">{{
              'fields.calendar.gregorianShort' | translate
            }}</small>
          </span>
        </div>

        <div class="day-events">
          @if (day.events.length > 0) {
            <app-day-template [events]="day.events"></app-day-template>
          }
          <div class="events-actions">
            <svg
              *appHasPermission="['create:bookings']"
              (click)="addEventForDay(day.date, $event)"
              class="add-event-icon"
              width="30"
              height="30"
              version="1.1"
              id="Layer_1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              x="0px"
              y="0px"
              fill="#1EAB8F"
              viewBox="0 0 300.003 300.003"
              style="enable-background: new 0 0 300.003 300.003"
              xml:space="preserve">
              <g>
                <g>
                  <path
                    d="M150,0C67.159,0,0.001,67.159,0.001,150c0,82.838,67.157,150.003,149.997,150.003S300.002,232.838,300.002,150
			C300.002,67.159,232.839,0,150,0z M213.281,166.501h-48.27v50.469c-0.003,8.463-6.863,15.323-15.328,15.323
			c-8.468,0-15.328-6.86-15.328-15.328v-50.464H87.37c-8.466-0.003-15.323-6.863-15.328-15.328c0-8.463,6.863-15.326,15.328-15.328
			l46.984,0.003V91.057c0-8.466,6.863-15.328,15.326-15.328c8.468,0,15.331,6.863,15.328,15.328l0.003,44.787l48.265,0.005
			c8.466-0.005,15.331,6.86,15.328,15.328C228.607,159.643,221.742,166.501,213.281,166.501z" />
                </g>
              </g>
            </svg>
          </div>
        </div>
      </div>
    </ng-template>
  </mwl-calendar-month-view>
</div>
